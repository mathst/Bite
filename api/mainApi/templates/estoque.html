{% extends 'bases/base.html' %}

{% block content %}
  <div class="row">
    <div class="col-md-6">
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title">Quantidade Total de Itens</h5>
        </div>
        <div class="card-body">
          <h1 class="card-text">{{ quantidade_total_itens }}</h1>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title">Valor Total em Estoque</h5>
        </div>
        <div class="card-body">
          <h1 class="card-text">{{ valor_total_estoque }}</h1>
        </div>
      </div>
    </div>
  </div>
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="dropdown">
        <button class="uil uil-plus dropdown-btn ">  Adicionar Item</button>
        <div class="dropdown-content">
          <form method="POST" class="adicionar" id="adicionar">
            {% csrf_token %}
            <input type="text" name="nome_item" class="drop-form mb-2" placeholder="Nome do Item">
            <input type="text" name="quantidade_item" class="drop-form mb-2"placeholder="Quantidade do Item">
            <input type="text" name="valor_item"class="drop-form mb-2"placeholder="Valor do Item">
            <input type="text" name="tipo_item" class="drop-form mb-2"placeholder="Tipo do Item">
            <input type="text" name="ingredientes_item" placeholder="Ingredientes do Item">
            <input type="text" name="imagem_item" class="drop-form mb-2"placeholder="Imagem do Item">
            <button type="submit" name="adicionar"class="dropdown-btn">Confirmar</button>
          </form>  
        </div>
      </div>
      <div class="dropdown">
        <button class="uil uil-redo dropdown-btn">  Reabastecer Item</button>
        <div class="dropdown-content">
          <form method="POST" id="reabastecer-item-form">
            {% csrf_token %}
            <input type="text" name="nome_item" class="drop-form mb-2" placeholder="Nome do Item">
            <input type="text" name="quantidade_item" class="drop-form mb-2" placeholder="Quantidade do Item">
            <input type="text" name="valor_item" class="drop-form mb-2" placeholder="valor do Item">
            <button type="submit" cname="adicionar"class="dropdown-btn">Confirmar</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class = "col-md-6">
  <table class="table table-striped ">
    <thead>
      <tr>
        <th scope="col">Nome</th>
        <th scope="col">Quantidade</th>
        <th scope="col">Valor Unitário</th>
        <th scope="col">Ações</th>
        <th scope="col">
          <form method="GET">
            <div class="input-group">
              <input type="text" name="search_query" class="add-item-form" placeholder="Pesquisar Item">
              <button class="add-item-button" type="submit">Buscar</button>
            </div>
          </form>
        </th>
      </tr>
    </thead>
    <tbody>
      {% for item in itens %}
      <tr>
        <td>{{ item.nome }}</td>
        <td>{{ item.quantidade }}</td>
        <td>R$ {{ item.valor_unitario }}</td>
        <td>
          <form method="POST" style="display: inline;">
            {% csrf_token %}
            <button type="submit" name="remover" class="add-item-button btn-sm "><i class="uil uil-trash-alt"></i></button>
          </form>
          <div class="dropdown">
            <button class="dropdown-btn"><i class="uil uil-edit"></i></button>
            <div class="dropdown-content">
              <form method="POST" id="reabastecer-item-form">
                {% csrf_token %}
                <input type="text" name="nome_item" class="drop-form mb-2" placeholder="Nome do Item">
                <input type="text" name="quantidade_item" class="drop-form mb-2" placeholder="Quantidade do Item">
                <input type="text" name="valor_item" class="drop-form mb-2" placeholder="valor do Item">
                <button type="submit" cname="adicionar"class="dropdown-btn">ok</button>
              </form>
            </div>
          </div>
        </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>
{% endblock %}
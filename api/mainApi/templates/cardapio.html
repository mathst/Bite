{% extends 'bases/base.html' %}
{% load static %}
{% block content %}
    <h1>Cardápio</h1>
    {% if request.session.tipo_user|default:'' == 'gerente' %}
        <!-- Adicionar formulário para adicionar novos itens -->
        <div class="dropdown">
			<button class="dropdown-btn">
			  <i class="uil uil-plus-circle"></i>
			</button>
			<div class="dropdown-content">
			  <div class="dropdown-btn">Item</div>
			  <div class="dropdown-content">
				<form method="POST">
					{% csrf_token %}
					<input type="text" name="nome" placeholder="Nome">
					<input type="text" name="quantidade" placeholder="Quantidade">
					<input type="text" name="valor_unitario" placeholder="Valor Unitário">
					<input type="text" name="tipo" placeholder="Tipo">
					<input type="text" name="categoria" placeholder="Categoria">
					<input type="text" name="valor_venda" placeholder="Valor de Venda">
					<input type="text" name="ingredientes" placeholder="Ingredientes">
					<input type="text" name="img" placeholder="URL da Imagem">
					<div class="add-item-button">
						<i class="uil uil-plus-circle"></i>
						<input class="uil uil-plus-circle" type="submit" value="Adicionar">
					</div>
				</form>
				
				  
			  </div>
			  <div class="dropdown-btn">Combo</div>
			  <div class="dropdown-content">
				<form method="POST">
				  {% csrf_token %}
				  <input type="text" id="nome_combo" name="nome_combo" placeholder="Nome">
				  <input type="text" id="descricao_combo" name="descricao_combo" placeholder="Descrição">
				  <input type="text" id="itens" name="itens" placeholder="Ingredientes">
				  <input type="text" id="valor_venda" name="valor_venda" placeholder="Valor de venda">
				  <button type="submit" name="adicionar"class="btn-table btn-circle">
					<i class="uil uil-check"></i>
				  </button>
				</form>
			  </div>
			</div>
		  </div>  
    {% endif %}
	<h1>Combos</h1>
    <div class="cards">
        <!-- Listagem dos combos em cards -->
        {% for combo in combos %}
            <div class="card">
                <img src="{{ combo.imagem }}" alt="{{ combo.nome }}" class="card-image">
                <div class="card-info">
                    <h2>{{ combo.nome }}</h2>
                    <p>{{ combo.descricao }}</p>
                    <p>Preço: R$ {{ combo.preco }}</p>
                    {% if request.session.tipo_user|default:'' == 'gerente' %}
                        <!-- Ícones de editar/excluir visíveis apenas para o gerente -->
                        <div class="card-actions dropdown">
                            <button class="btn-table btn-circle">
                                <i class="uil uil-edit"></i>
                            </button>
                            <div class="dropdown-content">
                                <form method="POST">
                                    {% csrf_token %}
                                    <input type="text" id="nome_item" name="nome_item" placeholder="Nome">
                                    <input type="text" id="descricao_item" name="descricao_item" placeholder="Descrição">
                                    <input type="text" id="ingredientes_item" name="ingredientes_item" placeholder="Ingredientes">
                                    <input type="text" id="valor_venda" name="valor_venda" placeholder="Valor de venda">
									<div class="btn-table">
                                        <i class="uil uil-check"></i>
                                        <input class="uil uil-check" type="submit" value="Editar">
                                    </div>
                                </form>
                                <form method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="combo_id" value="{{ combo.id }}">
                                    <div class="btn-table">
                                        <i class="uil uil-trash-alt"></i>
                                        <input class="uil uil-trash-alt" type="submit" value="Excluir">
                                    </div>
                                </form>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
	<div class="categories">
		{% for categoria, itens_categoria in categorias.items %}
		<div class="category">
			<h2>{{ categoria }}</h2>
			<div class="cards">
				{% for item in itens_categoria %}
				<div class="card">
					<img src="{{ item.img }}" alt="{{ item.nome }}" class="card-image">
					<div class="card-content ">
						<span>{{ item.nome }}</span>
						<p>{{ item.descricao }}</p>
						<p>Preço: R$ {{ item.valor_venda }}</p>
						{% if request.session.tipo_user|default:'' == 'gerente' %}
						<!-- Ícones de editar/excluir visíveis apenas para o gerente -->
						<div class="card-actions dropdown">
							<button class="btn-table btn-circle">
								<i class="fas fa-edit"></i>
							</button>
							<div class="dropdown-content">
								<form method="POST">
									{% csrf_token %}
									<input type="text" id="nome_item" name="nome_item" placeholder="Nome">
									<input type="text" id="descricao_item" name="descricao_item" placeholder="Descrição">
									<input type="text" id="ingredientes_item" name="ingredientes_item" placeholder="Ingredientes">
									<input type="text" id="valor_venda" name="valor_venda" placeholder="Valor de venda">
									<div class="add-item-button">
										<i class="uil uil-plus-circle"></i>
										<input class="uil uil-plus-circle" type="submit" value="Adicionar">
									</div>
								</form>
							</div>
							<div class="dropdown">
								<form method="POST" style="display: inline;">
									{% csrf_token %}
									<button type="submit" name="remover" class="btn-table btn-circle">
										<i class="uil uil-trash-alt"></i>
									</button>
								</form>
							</div>
						</div>
						{% endif %}
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
		{% endfor %}
	</div>
	
{% endblock %}

